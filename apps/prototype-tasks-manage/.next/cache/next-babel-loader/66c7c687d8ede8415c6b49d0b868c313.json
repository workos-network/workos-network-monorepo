{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _this = this,\n    _jsxFileName = \"/Users/admin/Documents/GitHub/esence/workos-network-monorepo/node_modules/react-monday/src/Provider.jsx\",\n    _s = $RefreshSig$();\n\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\n/* --- Global --- */\nimport React, { useContext, useReducer, useEffect, useState } from \"react\";\nimport { GraphQLClient, ClientContext } from \"graphql-hooks\";\n/* --- Local --- */\n\nimport * as actionList from \"./actions\";\nimport Context from \"./Context\";\nimport reducer from \"./lib/reducer\";\nimport { enhanceActions } from \"./lib/middleware\";\nimport { AUTHORIZE_CLIENT, ENABLE_DEV_MODE, CONNECT_CLIENT } from \"./lib/types\";\nvar API_MONDAY = \"https://api.monday.com/v2/\";\nvar initialState = {\n  isClientAuthorized: false,\n  isDevMode: false,\n  url: API_MONDAY,\n  client: new GraphQLClient({\n    url: API_MONDAY\n  }),\n  token: undefined\n};\n/**\n * @function Provider\n * @param {Array<React.Component>} children\n * @param {String} url\n * @param {String} token\n */\n\nvar Provider = function Provider(_ref) {\n  _s();\n\n  var children = _ref.children,\n      url = _ref.url,\n      token = _ref.token,\n      devMode = _ref.devMode;\n\n  var _useReducer = useReducer(reducer, initialState),\n      state = _useReducer[0],\n      dispatch = _useReducer[1];\n\n  React.useEffect(function () {\n    if (devMode) {\n      dispatch({\n        type: ENABLE_DEV_MODE\n      });\n    }\n\n    if (!url && token) {\n      dispatch({\n        type: AUTHORIZE_CLIENT,\n        payload: {\n          token: token\n        }\n      });\n    }\n\n    if (url && token) {\n      dispatch({\n        type: CONNECT_CLIENT,\n        payload: {\n          url: url,\n          token: token\n        }\n      });\n    }\n  }, []);\n  React.useEffect(function () {\n    if (state.token) {\n      dispatch({\n        type: AUTHORIZE_CLIENT,\n        payload: {\n          token: token\n        }\n      });\n    }\n  }, [state.token]);\n  React.useMemo( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n    var _token;\n\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            if (true) {\n              // Client-side-only code\n              if (window.localStorage) {\n                _token = window.localStorage.getItem(\"token\");\n              }\n\n              if (token) {\n                dispatch({\n                  type: AUTHORIZE_CLIENT,\n                  payload: {\n                    token: token\n                  }\n                });\n              }\n            }\n\n          case 1:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  })), [state.isDevMode]);\n  var isClientAuthorized = state.isClientAuthorized;\n  var actions = enhanceActions(actionList, state, dispatch);\n  React.useEffect(function () {// console.log(state, \"monday state\");\n  }, [state]);\n  return __jsx(ClientContext.Provider, {\n    value: state.client,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 5\n    }\n  }, __jsx(Context.Provider, {\n    value: _objectSpread(_objectSpread({\n      love: true\n    }, actions), state),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 7\n    }\n  }, children));\n};\n\n_s(Provider, \"81pqpS0eGDTuWtP5MiWW4YsLtMY=\");\n\n_c = Provider;\nexport default Provider;\n\nvar _c;\n\n$RefreshReg$(_c, \"Provider\");","map":{"version":3,"sources":["/Users/admin/Documents/GitHub/esence/workos-network-monorepo/node_modules/react-monday/src/Provider.jsx"],"names":["React","useContext","useReducer","useEffect","useState","GraphQLClient","ClientContext","actionList","Context","reducer","enhanceActions","AUTHORIZE_CLIENT","ENABLE_DEV_MODE","CONNECT_CLIENT","API_MONDAY","initialState","isClientAuthorized","isDevMode","url","client","token","undefined","Provider","children","devMode","state","dispatch","type","payload","useMemo","window","localStorage","getItem","actions","love"],"mappings":"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","sourcesContent":["/* --- Global --- */\nimport React, { useContext, useReducer, useEffect, useState } from \"react\";\nimport { GraphQLClient, ClientContext } from \"graphql-hooks\";\n\n/* --- Local --- */\nimport * as actionList from \"./actions\";\nimport Context from \"./Context\";\nimport reducer from \"./lib/reducer\";\nimport { enhanceActions } from \"./lib/middleware\";\nimport { AUTHORIZE_CLIENT, ENABLE_DEV_MODE, CONNECT_CLIENT } from \"./lib/types\";\n\nconst API_MONDAY = \"https://api.monday.com/v2/\";\nconst initialState = {\n  isClientAuthorized: false,\n  isDevMode: false,\n  url: API_MONDAY,\n  client: new GraphQLClient({\n    url: API_MONDAY,\n  }),\n  token: undefined,\n};\n\n/**\n * @function Provider\n * @param {Array<React.Component>} children\n * @param {String} url\n * @param {String} token\n */\nconst Provider = ({ children, url, token, devMode }) => {\n  const [state, dispatch] = useReducer(reducer, initialState);\n\n  React.useEffect(() => {\n    if (devMode) {\n      dispatch({\n        type: ENABLE_DEV_MODE,\n      });\n    }\n    if (!url && token) {\n      dispatch({\n        type: AUTHORIZE_CLIENT,\n        payload: { token },\n      });\n    }\n    if (url && token) {\n      dispatch({\n        type: CONNECT_CLIENT,\n        payload: {\n          url,\n          token,\n        },\n      });\n    }\n  }, []);\n\n  React.useEffect(() => {\n    if (state.token) {\n      dispatch({\n        type: AUTHORIZE_CLIENT,\n        payload: { token },\n      });\n    }\n  }, [state.token]);\n\n  React.useMemo(async () => {\n    if (process.browser) {\n      // Client-side-only code\n      if (window.localStorage) {\n        const token = window.localStorage.getItem(\"token\");\n      }\n      if (token) {\n        dispatch({\n          type: AUTHORIZE_CLIENT,\n          payload: { token },\n        });\n      }\n    }\n  }, [state.isDevMode]);\n\n  const { isClientAuthorized } = state;\n  const actions = enhanceActions(actionList, state, dispatch);\n\n  React.useEffect(() => {\n    // console.log(state, \"monday state\");\n  }, [state]);\n\n  return (\n    <ClientContext.Provider value={state.client}>\n      <Context.Provider\n        value={{\n          love: true,\n          ...actions,\n          ...state,\n        }}\n      >\n        {children}\n      </Context.Provider>\n    </ClientContext.Provider>\n  );\n};\n\nexport default Provider;\n"]},"metadata":{},"sourceType":"module"}