{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _s = $RefreshSig$();\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\n/* --- Global --- */\nimport React, { useReducer } from \"react\";\nimport withMonday from \"../withContext\";\nimport { ITEMS_QUERY } from \"../lib/graphql\";\nexport var ITEMS_QUERY_REQUEST = \"ITEMS_QUERY_REQUEST\";\nexport var ITEMS_QUERY_SUCCESS = \"ITEMS_QUERY_SUCCESS\";\nexport var ITEMS_QUERY_FAILURE = \"ITEMS_QUERY_FAILURE\";\n/**\n * @name useItemsQuery\n * @param {Integer} limit\n * @param {Integer} page\n */\n\nexport var useItemsQuery = function useItemsQuery(_ref) {\n  _s();\n\n  var limit = _ref.limit,\n      page = _ref.page;\n  var monday = withMonday();\n\n  var _React$useState = React.useState(),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      Set = _React$useState2[1];\n\n  var initialState = {\n    data: undefined,\n    error: undefined,\n    loading: false\n  };\n\n  function reducer(state, action) {\n    switch (action.type) {\n      case ITEMS_QUERY_REQUEST:\n        return _objectSpread(_objectSpread({}, state), {}, {\n          loading: true\n        });\n\n      case ITEMS_QUERY_SUCCESS:\n        return _objectSpread(_objectSpread({}, state), action.payload);\n\n      case ITEMS_QUERY_FAILURE:\n        return _objectSpread(_objectSpread({}, state), {}, {\n          error: action.payload\n        });\n\n      default:\n        throw new Error();\n    }\n  }\n\n  var _useReducer = useReducer(reducer, initialState),\n      state = _useReducer[0],\n      dispatch = _useReducer[1];\n  /* ------------------- */\n  // Actions\n\n  /* ------------------- */\n\n\n  React.useEffect(function (inputs) {\n    if (state.loading) {\n      console.log(\"requesting\");\n\n      if (monday.client && monday.isClientAuthorized) {\n        monday.client.request({\n          query: ITEMS_QUERY,\n          variables: {\n            limit: 35 // page: inputs.page\n\n          }\n        }).then(function (_ref2) {\n          var data = _ref2.data,\n              error = _ref2.error;\n          dispatch({\n            type: ITEMS_QUERY_SUCCESS,\n            payload: {\n              data: data.items,\n              error: error\n            }\n          });\n        })[\"catch\"](function (_ref3) {\n          var data = _ref3.data,\n              error = _ref3.error;\n          console.log(data, error, \"data, error\");\n          dispatch({\n            type: ITEMS_QUERY_FAILURE,\n            payload: error\n          });\n        });\n      }\n    }\n  }, [state.loading, monday.client, monday.isClientAuthorized]);\n\n  var request = function request(inputs) {\n    return dispatch({\n      type: ITEMS_QUERY_REQUEST,\n      payload: inputs\n    });\n  }; // const { loading, error, data, refetch, subscribeToMore } = useQuery(\n  //   ITEMS_QUERY,\n  //   {\n  //     variables: {\n  //       limit: 30,\n  //       page: 1\n  //     }\n  //   }\n  // );\n\n\n  return {\n    request: request,\n    data: state.data,\n    loading: state.loading,\n    error: state.error,\n    refetch: request\n  };\n};\n\n_s(useItemsQuery, \"Xc3uEYG0SCKz8YbF8zyo9W5V9P4=\");\n\nexport default useItemsQuery;","map":{"version":3,"sources":["/Users/admin/Documents/GitHub/esence/workos-network-monorepo/node_modules/react-monday/src/hooks/useItemsQuery.js"],"names":["React","useReducer","withMonday","ITEMS_QUERY","ITEMS_QUERY_REQUEST","ITEMS_QUERY_SUCCESS","ITEMS_QUERY_FAILURE","useItemsQuery","limit","page","monday","useState","Set","initialState","data","undefined","error","loading","reducer","state","action","type","payload","Error","dispatch","useEffect","inputs","console","log","client","isClientAuthorized","request","query","variables","then","items","refetch"],"mappings":"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","sourcesContent":["/* --- Global --- */\nimport React, { useReducer } from \"react\";\nimport withMonday from \"../withContext\";\nimport { ITEMS_QUERY } from \"../lib/graphql\";\n\nexport const ITEMS_QUERY_REQUEST = \"ITEMS_QUERY_REQUEST\";\nexport const ITEMS_QUERY_SUCCESS = \"ITEMS_QUERY_SUCCESS\";\nexport const ITEMS_QUERY_FAILURE = \"ITEMS_QUERY_FAILURE\";\n\n/**\n * @name useItemsQuery\n * @param {Integer} limit\n * @param {Integer} page\n */\nexport const useItemsQuery = ({ limit, page }) => {\n  const monday = withMonday();\n  const [, Set] = React.useState();\n  const initialState = {\n    data: undefined,\n    error: undefined,\n    loading: false\n  };\n\n  function reducer(state, action) {\n    switch (action.type) {\n      case ITEMS_QUERY_REQUEST:\n        return {\n          ...state,\n          loading: true\n        };\n      case ITEMS_QUERY_SUCCESS:\n        return {\n          ...state,\n          ...action.payload\n        };\n      case ITEMS_QUERY_FAILURE:\n        return {\n          ...state,\n          error: action.payload\n        };\n\n      default:\n        throw new Error();\n    }\n  }\n\n  const [state, dispatch] = useReducer(reducer, initialState);\n\n  /* ------------------- */\n  // Actions\n  /* ------------------- */\n  React.useEffect(\n    inputs => {\n      if (state.loading) {\n        console.log(\"requesting\");\n        if (monday.client && monday.isClientAuthorized) {\n          monday.client\n            .request({\n              query: ITEMS_QUERY,\n              variables: {\n                limit: 35\n                // page: inputs.page\n              }\n            })\n            .then(({ data, error }) => {\n              dispatch({\n                type: ITEMS_QUERY_SUCCESS,\n                payload: {\n                  data: data.items,\n                  error\n                }\n              });\n            })\n            .catch(({ data, error }) => {\n              console.log(data, error, \"data, error\");\n              dispatch({\n                type: ITEMS_QUERY_FAILURE,\n                payload: error\n              });\n            });\n        }\n      }\n    },\n    [state.loading, monday.client, monday.isClientAuthorized]\n  );\n\n  const request = inputs =>\n    dispatch({\n      type: ITEMS_QUERY_REQUEST,\n      payload: inputs\n    });\n\n  // const { loading, error, data, refetch, subscribeToMore } = useQuery(\n  //   ITEMS_QUERY,\n  //   {\n  //     variables: {\n  //       limit: 30,\n  //       page: 1\n  //     }\n  //   }\n  // );\n\n  return {\n    request,\n    data: state.data,\n    loading: state.loading,\n    error: state.error,\n    refetch: request\n  };\n};\n\nexport default useItemsQuery;\n"]},"metadata":{},"sourceType":"module"}